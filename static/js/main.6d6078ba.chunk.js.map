{"version":3,"sources":["components/Card.module.css","modules/steps.ts","components/Card.tsx","tools/array.ts","tools/time.ts","components/Trainer.tsx","App.tsx","reportWebVitals.ts","index.tsx","components/Trainer.module.css"],"names":["module","exports","steps","title","items","timeSec","repeatCount","subtitle","group","step","push","data","Card","repeatItems","useMemo","length","array","Array","i","arrayWithLength","className","css","root","stepsList","undefined","map","item","index","time","Math","floor","_","repeatItem","xx","friction","tension","getXZFromX","x","isDown","newX","widthPart","window","innerWidth","max","Trainer","initialSpring","prevCard","currentCard","nextCard","useSpring","set","bind","useDrag","down","movement","width","config","useState","stepIndex","div","card","style","transform","interpolate","scale","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6d6078ba.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Card_root__3MkF8\",\"stepsList\":\"Card_stepsList__1NQhJ\",\"stepsItem\":\"Card_stepsItem__IlQTM\",\"item_active\":\"Card_item_active__3ytBQ\",\"title\":\"Card_title__1yJ7t\",\"subtitle\":\"Card_subtitle__1lNmV\",\"data\":\"Card_data__3UBEy\",\"item\":\"Card_item__1z5IU\",\"time\":\"Card_time__3t47b\",\"repeatCount\":\"Card_repeatCount__2eZHW\",\"repeatItem\":\"Card_repeatItem__3-1q1\",\"prevNext\":\"Card_prevNext__114Pb\"};","const stepGroups = [{\n  title: \"Сидеть\",\n  steps: [\n    {\n      items: [\n        {\n          title: \"Зажмурится\",\n          timeSec: 4\n        },\n        {\n          title: \"Разомкнуть веки\",\n          timeSec: 4\n        },\n      ],\n      repeatCount: 8\n    },\n    {\n      items: [\n        {\n          title: \"Быстро моргать\",\n          timeSec: 15\n        },\n        {\n          title: \"Закрыть глаза\",\n          timeSec: 10\n        },\n      ],\n      repeatCount: 4\n    },\n    {\n      items: [{\n        title: \"Массировать указательными пальцами\",\n        timeSec: 60\n      }],\n      repeatCount: 1\n    },\n    {\n      items: [{\n        title: \"Лёгкие надавливающие движения\",\n        timeSec: 3\n      }],\n      repeatCount: 4\n    }\n  ]\n},\n{\n  title: \"Ровно сидеть\",\n  steps: [\n    {\n      items: [{\n        title: \"Вверх-вниз\",\n        timeSec: 3\n      }],\n      repeatCount: 12\n    },\n    {\n      items: [{\n        title: \"Влево-вправо\",\n        timeSec: 3\n      }],\n      repeatCount: 12\n    },\n    {\n      items: [{\n        title: \"Вверх-вниз, влево-вправо\",\n        timeSec: 6\n      }],\n      repeatCount: 10\n    },\n    {\n      items: [{\n        title: \"Вращение по и против часовой\",\n        timeSec: 3\n      }],\n      repeatCount: 6\n    }\n  ]\n},\n{\n  title: \"Стоять\",\n  steps: [\n    {\n      items: [\n        {\n          title: \"Стена\",\n          timeSec: 3\n        },\n        {\n          title: \"Палец 30 см от глаз\",\n          timeSec: 5\n        }\n      ],\n      repeatCount: 12\n    },\n    {\n      items: [{\n        title: \"Палец на вытянутой руке: cмотреть и приближать до двоения\",\n        timeSec: 4\n      }],\n      repeatCount: 8\n    },\n  ]\n},\n{\n  // TODO special page!\n  title: \"Стоять у окна\",\n  subtitle: \"Метка на окне, объект в дали. По 3 секунды\",\n  steps: [\n    {\n      items: [{\n        title: \"Левый глаз\",\n        timeSec: 120\n      }, {\n        title: \"Оба глаза\",\n        timeSec: 120\n      }, {\n        title: \"Правый глаз\",\n        timeSec: 120\n      }],\n      repeatCount: 1\n    }\n  ]\n}];\n\nexport type LinearizedStep = {\n  title: string;\n  subtitle?: string;\n  repeatCount: number;\n  data: {\n    items: {\n      title: string;\n      timeSec: number;\n    }[];\n  };\n};\n\nexport const steps: LinearizedStep[] = [];\n\nfor (const group of stepGroups) {\n  for (const step of group.steps) {\n    steps.push({\n      title: group.title,\n      subtitle: group.subtitle,\n      repeatCount: step.repeatCount,\n      data: step\n    });\n  }\n}\n","import { FC, useMemo } from 'react';\n// import classNames from 'classnames';\n\nimport css from './Card.module.css';\nimport { secToString } from '../tools/time';\nimport { arrayWithLength } from '../tools/array';\nimport { LinearizedStep } from '../modules/steps';\n\ntype CardProps = {\n  step: LinearizedStep;\n};\n\nexport const Card: FC<CardProps> = ({ step }) => {\n  const repeatItems = useMemo(\n    () => arrayWithLength(step.repeatCount),\n    [step.repeatCount]\n  );\n\n  return (\n    <div className={css.root}>\n      <div className={css.stepsList}>\n        {/* {steps.map((_, index) => (\n          <div\n            className={classNames(css.stepsItem, stepIndex >= index && css.item_active)}\n            key={index}\n          />\n        ))} */}\n      </div>\n      <div className={css.title}>\n        {step.title}\n      </div>\n      {step.subtitle !== undefined && (\n        <div className={css.subtitle}>\n          {step.subtitle}\n        </div>\n      )}\n      <div className={css.data}>\n        {step.data.items.map((item, index) => (\n          <div key={index} className={css.item}>\n            <div className={css.time}>{secToString(item.timeSec)}</div>\n            {item.title}\n          </div>\n        ))}\n        {step.repeatCount !== 1 && (\n          <div className={css.item}>\n            <div className={css.repeatCount}>\n              x{step.repeatCount}\n            </div>\n            {repeatItems.map((_, index) => (\n              <div key={index} className={css.repeatItem} />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","export const arrayWithLength = (length: number): null[] => {\n  const array = new Array(length);\n  for (let i = 0; i < length; i++) {\n    array[i] = null;\n  }\n  return array;\n}\n","export const secToString = (timeSec: number): string => {\n  if (timeSec < 60) {\n    return `${timeSec}s`;\n  }\n  return `${Math.floor(timeSec/60)}m`;\n}\n","import classNames from 'classnames';\nimport { FC, useMemo, useState } from 'react';\nimport { useDrag } from 'react-use-gesture';\nimport { useSpring, animated } from 'react-spring';\n\nimport css from './Trainer.module.css';\nimport { steps } from '../modules/steps';\nimport { Card } from './Card';\n\nconst xx = {\n  friction: 50,\n  tension: 800 \n};\n\n// TODO use parts\n\ntype SpringType = {\n  prevCard: [number, number];\n  currentCard: [number, number];\n  nextCard: [number, number];\n};\nconst getXZFromX = (x: number, isDown: boolean): [number, number] => {\n  const newX = x < 0 ? x : 0;\n  const widthPart = x / window.innerWidth;\n  const newZ = x < 0 ? 1 : Math.max((1 - widthPart / 5), 0);\n\n  return [newX, newZ - (isDown ? 0.1 : 0)];\n};\n\nexport const Trainer: FC = () => {\n  const initialSpring = useMemo(() => ({\n    prevCard: getXZFromX(-window.innerWidth * 1.5, false),\n    currentCard: getXZFromX(0, false),\n    nextCard: getXZFromX(window.innerWidth * 1.5, false)\n  }), []);\n\n  const [{ currentCard, nextCard, prevCard }, set] = useSpring<SpringType>(() => initialSpring);\n\n  const bind = useDrag(({ down, movement: [x] }) => {\n    const width = window.innerWidth;\n\n    set({\n      prevCard: down ? getXZFromX(x - width, true) : initialSpring.prevCard,\n      currentCard: down ? getXZFromX(x, true) : initialSpring.currentCard,\n      nextCard: down ? getXZFromX(x + width, true) : initialSpring.nextCard,\n      config: down ? xx : undefined\n    })\n  })\n  const [stepIndex] = useState(1); // setStepIndex\n\n  // const handlePrev = useCallback(() => {\n  //   setStepIndex(Math.max(stepIndex - 1, 0));\n  // }, [stepIndex]);\n\n  // const handleNext = useCallback(() => {\n  //   setStepIndex(Math.min(stepIndex + 1, steps.length - 1));\n  // }, [stepIndex]);\n\n  return (\n    <div {...bind()} className={css.root}>\n      <animated.div\n        className={css.card}\n        style={{\n          transform: nextCard.interpolate(\n            ((x: number, scale: number) => `scale(${scale}) translateX(${x}px)`) as any\n          )\n        }}\n      >\n        <Card step={steps[stepIndex - 1]} />\n      </animated.div>\n      <animated.div\n        className={css.card}\n        style={{\n          transform: currentCard.interpolate(\n            ((x: number, scale: number) => `scale(${scale}) translateX(${x}px)`) as any\n          )\n        }}\n      >\n        <Card step={steps[stepIndex]} />\n      </animated.div>\n      <animated.div\n        className={css.card}\n        style={{\n          transform: prevCard.interpolate(\n            ((x: number, scale: number) => `scale(${scale}) translateX(${x}px)`) as any\n          )\n        }}\n      >\n        <Card step={steps[stepIndex + 1]} />\n      </animated.div>\n    </div>\n  );\n};\n","import { Trainer } from './components/Trainer';\n\nexport const App = () => {\n  return (\n    <Trainer />\n  );\n}\n\n\n/* <div>Работа над страницей в процессе...</div>\n      <div>\n        по материалам сайта{' '}\n        <a href='https://www.ochkov.net/informaciya/stati/kak-vypolnyat-lechebnuyu-gimnastiku-dlya-glaz-po-metodike-avetisova.htm'>\n          ochkov.net\n        </a>\n      </div> */","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Trainer_root__2D0FO\",\"card\":\"Trainer_card__QlvSl\"};"],"sourceRoot":""}